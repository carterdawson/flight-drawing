<html>
    <head>
        <title>Fly Writing Route Generator</title>

        <script type="module">
            import {Waypoint, FlightDrawing} from './dist/index.js';
            window.setPoints = function(str) {
                document.getElementById("points").innerText = str
            }

            window.penguin_points = "150,1007|202,1017|254,1018|299,1010|343,996|392,985|449,979|485,982|510,989|519,1000|510,1007|490,1018|450,1024|411,1027|368,1024|325,1017|278,1000|240,978|204,942|181,908|163,868|152,820|146,765|147,713|155,649|165,601|179,546|195,491|210,446|227,411|244,400|262,418|273,453|281,488|288,526|294,572|301,617|306,657|310,704|310,750|305,795|299,833|288,866|274,903|255,932|246,942|234,946|223,937|217,921|212,878|211,822|213,780|215,742|214,702|210,669|201,636|196,586|194,552|196,521|197,470|206,432|221,381|237,333|264,270|295,222|324,187|363,169|397,164|433,172|475,181|518,177|561,184|582,196|560,203|535,207|503,216|471,229|444,245|428,261|421,292|439,320|465,358|485,409|492,454|497,532|498,596|497,648|494,712|490,750|488,792|485,831"
            window.dolphin_points = "520,580|462,623|395,686|357,730|325,784|305,848|308,890|329,926|367,954|403,970|430,1000|440,1028|437,1038|426,1040|405,1035|361,1025|313,1018|271,1017|229,1021|193,1029|167,1039|132,1054|92,1076|80,1077|74,1069|76,1050|87,1024|103,1007|135,991|155,971|169,943|185,896|198,847|211,781|230,682|246,591|271,513|299,455|331,406|362,363|391,322|401,302|400,282|392,263|381,247|384,232|403,221|447,213|488,206|534,197|575,177|626,156|683,136|741,127|790,122|841,122|897,132|949,147|990,174|1024,205|1052,235|1081,266|1118,291|1140,308|1147,328|1136,343|1114,351|1093,356|1062,361|1032,365|979,370|947,372|928,374|910,384|890,396|873,408|858,427|842,448|833,469|826,489|821,517|822,543|827,568|837,593|860,578|878,558|892,536|902,516|912,491|919,464|921,435|918,409|911,393|895,370|882,355|868,345|855,337|828,328|798,325|771,325|737,330|706,339|679,346|651,357|617,374|587,390|563,407|543,422|524,441|509,462|500,484|494,508|498,535|531,544|571,536|601,520|629,502|651,483|672,465|695,439|714,414"
            window.chicken_points = "556,963|534,963|509,957|479,941|459,936|441,931|422,936|412,950|418,963|446,955|462,927|462,915|456,893|454,860|470,831|495,808|528,786|568,758|599,726|630,694|659,648|680,604|692,555|691,520|687,490|679,456|669,419|659,377|654,355|659,331|672,312|701,291|720,278|721,258|709,251|693,247|685,243|685,231|685,214|677,201|665,197|656,196|647,200|639,206|627,217|616,224|611,226|603,223|590,217|584,218|576,226|570,241|571,262|573,283|583,314|602,338|626,350|681,357|707,363|721,366|708,344|688,319|662,295|628,276|613,274|596,278|577,291|559,305|538,327|526,343|516,359|507,376|494,399|475,440|459,483|443,535|433,582|425,641|418,691|409,720|401,737|391,743|379,735|371,715|361,688|355,683|347,689|332,691|312,688|278,664|265,643|264,608|281,565|296,541|324,519|367,507|406,507|418,517|411,524|401,531|377,540|347,544|327,543|303,537|286,528|262,506|248,485|238,462|224,445|206,429|184,419|171,419|152,419|132,423|113,436|95,454|77,478|68,494|70,504|82,504|97,496|107,487|117,486|118,497|112,512|100,536|89,566|78,596|74,610|77,618|89,613|109,594|127,578|137,571|145,573|144,585|137,607|130,625|127,658|128,682|134,704|145,721|159,728|178,716|193,692|202,674|228,658|265,670|292,697|329,732|369,786|407,838|409,895|402,914|383,931|353,941|319,945|253,951|170,953"
            window.nflight_logo_points = "1932,949|1932,370|1951,333|1980,308|2021,299|2054,306|2407,701|2408,250|2422,220|2443,196|2473,178|2497,178|2550,220|2597,275|2645,354|2678,437|2691,523|2692,622|2671,717|2636,799|2601,849|2567,891|2520,934|2477,965|2416,999|2363,1020|2314,1033|2247,1044|2192,1043|2125,1035|2061,1019|2009,995|1966,972|1917,939|1880,903|1845,867|1818,830|1793,787|1775,746|1757,697|1744,643|1740,594|1740,536|1745,475|1761,416|1781,360|1809,311|1839,270|1876,226|1915,190|1966,156|2020,128|2070,108|2115,98|2162,90|2222,87|2278,90|2354,106|2420,133|2476,163|2501,186|2503,755|2491,787|2469,808|2448,822|2420,831|2392,829|2369,816|2029,433|2028,458|2027,873|2019,904|2003,925|1977,946|1932,949"
            window.setPoints(window.nflight_logo_points);

            window.generate = function() {
                let result = "No result yet"
                try {
                    //get the starting position
                    let lat = parseFloat(document.getElementById('lat').value);
                    let lon = parseFloat(document.getElementById('lon').value);
                    let points = document.getElementById('points').value
                    //and turn it into a waypoint
                    let wpt = new Waypoint(lat,lon);

                    //Create a drawing object
                    let drw = new FlightDrawing(points)
                    //create the route
                    result = drw.getRouteString(wpt);
                    //set the output accordingly

                } catch (err) {
                    //If I got an error just set my result to that
                    result = err;
                }

                //set my route to whatever I've come up with
                document.getElementById('route').value = result

            }

        </script>
    </head>
    <body>
        <h3>Starting Location</h3>
        <p>Lattitude numbers are positive for E, negative for W. Example: 115.1W is -115.1.</p>
        <label for="lat">Lat:</label> <input type="text" id="lat" name="lat" value="32.91"> 
        <label for="lon">Lon:</label> <input type="text" id="lon" name="lon" value="-116.5"><br> 
        <h3>Route points</h3>
        <p>Use the default NFlight Logo, or delete those route points and paste your own. </p>
        <label for="points">Points:</label><br/> 
        <textarea rows="10" cols="80" id="points" name="points"></textarea><br/> 
        <button onclick="setPoints(nflight_logo_points)">NFlight Logo</button>
        <button onclick="setPoints(penguin_points)">Penguin</button>
        <button onclick="setPoints(chicken_points)">Chicken</button>
        <br/><br/>
        
        <h3>Route</h3>
        <p>When you are ready, click Generate.</p>
        <button onclick="generate()">Generate</button><br/>
        <label for="route">Route:</label><br/>
        <textarea rows="40" cols="80" id="route" name="route"></textarea><br/>
        <p>Copy and paste the above route into your flight planning software</p>

    </body>
</html>
